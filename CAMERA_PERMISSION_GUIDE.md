# ğŸ“¸ HÆ°á»›ng dáº«n cáº¥p quyá»n Camera cho PWA

## ğŸ¯ Tá»•ng quan
á»¨ng dá»¥ng Kiá»ƒm kÃª tÃ i sáº£n cáº§n quyá»n truy cáº­p camera Ä‘á»ƒ quÃ©t mÃ£ QR. Há»‡ thá»‘ng Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u Ä‘á»ƒ:
- âœ… Kiá»ƒm tra quyá»n camera trÆ°á»›c khi khá»Ÿi Ä‘á»™ng scanner
- âœ… Hiá»ƒn thá»‹ UI rÃµ rÃ ng cho tá»«ng tráº¡ng thÃ¡i quyá»n
- âœ… Cung cáº¥p hÆ°á»›ng dáº«n chi tiáº¿t cho tá»«ng platform
- âœ… LuÃ´n cÃ³ phÆ°Æ¡ng Ã¡n nháº­p mÃ£ thá»§ cÃ´ng lÃ m backup

## ğŸ“± HÆ°á»›ng dáº«n theo thiáº¿t bá»‹

### iPhone/iPad (iOS Safari)

#### Khi dÃ¹ng trÃªn Safari:
1. **Láº§n Ä‘áº§u truy cáº­p:**
   - Khi nháº¥n "Báº¯t Ä‘áº§u quÃ©t", Safari sáº½ há»i quyá»n camera
   - Chá»n **"Cho phÃ©p"** (Allow)

2. **Náº¿u Ä‘Ã£ tá»« chá»‘i trÆ°á»›c Ä‘Ã³:**
   - VÃ o **CÃ i Ä‘áº·t** > **Safari**
   - Chá»n **Camera** > **Cho phÃ©p**
   - Quay láº¡i Safari vÃ  táº£i láº¡i trang

#### Khi cÃ i PWA (Add to Home Screen):
1. **CÃ i Ä‘áº·t PWA:**
   - Má»Ÿ Safari vÃ  truy cáº­p á»©ng dá»¥ng
   - Nháº¥n nÃºt chia sáº» (Share) â¬†ï¸
   - Chá»n **"Add to Home Screen"**
   - Äáº·t tÃªn vÃ  nháº¥n **"Add"**

2. **Cáº¥p quyá»n camera cho PWA:**
   - Má»Ÿ app tá»« mÃ n hÃ¬nh chÃ­nh
   - Khi nháº¥n "Báº¯t Ä‘áº§u quÃ©t", iOS sáº½ há»i quyá»n
   - Chá»n **"OK"** hoáº·c **"Cho phÃ©p"**

3. **Náº¿u PWA khÃ´ng thá»ƒ xin quyá»n:**
   - Quay láº¡i Safari
   - Truy cáº­p láº¡i trang web
   - Cáº¥p quyá»n camera trong Safari
   - XÃ³a PWA cÅ© vÃ  cÃ i láº¡i tá»« Safari

### Android (Chrome/Edge)

#### TrÃªn trÃ¬nh duyá»‡t:
1. **Láº§n Ä‘áº§u:**
   - Nháº¥n "Báº¯t Ä‘áº§u quÃ©t"
   - Chá»n **"Allow"** khi Ä‘Æ°á»£c há»i

2. **Náº¿u Ä‘Ã£ tá»« chá»‘i:**
   - Nháº¥n vÃ o biá»ƒu tÆ°á»£ng ğŸ”’ hoáº·c â„¹ï¸ trÃªn thanh Ä‘á»‹a chá»‰
   - TÃ¬m **"Camera"** trong Site settings
   - Chá»n **"Allow"**
   - Táº£i láº¡i trang (F5)

#### PWA trÃªn Android:
1. **CÃ i PWA:**
   - Chrome sáº½ tá»± Ä‘á»™ng hiá»‡n banner "Add to Home Screen"
   - Hoáº·c: Menu 3 cháº¥m > **"Install app"**

2. **Quyá»n camera:**
   - PWA sáº½ káº¿ thá»«a quyá»n tá»« Chrome
   - Náº¿u cáº§n, vÃ o **Settings** > **Apps** > **[TÃªn app]** > **Permissions**

### Desktop (Windows/Mac/Linux)

#### Chrome/Edge/Brave:
1. **Cáº¥p quyá»n:**
   - Nháº¥n "Báº¯t Ä‘áº§u quÃ©t"
   - Chá»n **"Allow"** trong popup

2. **Quáº£n lÃ½ quyá»n:**
   - Click vÃ o ğŸ”’ bÃªn trÃ¡i URL
   - TÃ¬m **Camera** > chá»n **"Allow"**

#### Firefox:
1. **Cáº¥p quyá»n:**
   - Nháº¥n "Báº¯t Ä‘áº§u quÃ©t"
   - Chá»n camera vÃ  nháº¥n **"Allow"**

2. **Reset quyá»n:**
   - Click vÃ o ğŸ”’ > **"Clear permissions"**
   - Táº£i láº¡i vÃ  cáº¥p quyá»n láº¡i

## ğŸ”§ Xá»­ lÃ½ sá»± cá»‘

### Camera khÃ´ng hoáº¡t Ä‘á»™ng
1. **Kiá»ƒm tra quyá»n há»‡ thá»‘ng:**
   - **Windows:** Settings > Privacy > Camera
   - **macOS:** System Preferences > Security & Privacy > Camera
   - **Linux:** Kiá»ƒm tra quyá»n trong system settings

2. **Kiá»ƒm tra trÃ¬nh duyá»‡t:**
   - Äáº£m báº£o trÃ¬nh duyá»‡t Ä‘Æ°á»£c cáº­p nháº­t
   - Thá»­ vá»›i trÃ¬nh duyá»‡t khÃ¡c
   - XÃ³a cache vÃ  cookies

### PWA khÃ´ng thá»ƒ quÃ©t QR
1. **iOS:**
   - XÃ³a app tá»« Home Screen
   - Má»Ÿ Safari, xÃ³a cache
   - CÃ i láº¡i PWA

2. **Android:**
   - Clear app data
   - Uninstall vÃ  reinstall PWA

### Lá»—i "Camera bá»‹ cháº·n"
- Kiá»ƒm tra xem cÃ³ pháº§n má»m antivirus/firewall cháº·n camera khÃ´ng
- Äáº£m báº£o khÃ´ng cÃ³ á»©ng dá»¥ng khÃ¡c Ä‘ang dÃ¹ng camera
- Restart thiáº¿t bá»‹ náº¿u cáº§n

## ğŸ’¡ Máº¹o sá»­ dá»¥ng

### QuÃ©t QR hiá»‡u quáº£:
- **Khoáº£ng cÃ¡ch:** 20-30cm tá»« camera Ä‘áº¿n QR code
- **Ãnh sÃ¡ng:** Äáº£m báº£o Ä‘á»§ sÃ¡ng, trÃ¡nh chÃ³i
- **GÃ³c quÃ©t:** Giá»¯ camera tháº³ng gÃ³c vá»›i QR code
- **Äá»™ nÃ©t:** Chá» camera láº¥y nÃ©t tá»± Ä‘á»™ng

### Backup - Nháº­p mÃ£ thá»§ cÃ´ng:
- LuÃ´n cÃ³ thá»ƒ nháº­p mÃ£ tÃ i sáº£n thá»§ cÃ´ng náº¿u khÃ´ng quÃ©t Ä‘Æ°á»£c
- Há»— trá»£ tÃ¬m kiáº¿m theo: mÃ£ tÃ i sáº£n, tÃªn, serial, tech code

## ğŸ“Š Tráº¡ng thÃ¡i quyá»n trong app

App sáº½ hiá»ƒn thá»‹ rÃµ tráº¡ng thÃ¡i:

1. **ğŸ”„ Äang kiá»ƒm tra...** - Äang kiá»ƒm tra quyá»n camera
2. **ğŸ’™ Cáº§n quyá»n camera** - ChÆ°a cáº¥p quyá»n, sáºµn sÃ ng xin quyá»n
3. **âœ… Sáºµn sÃ ng quÃ©t** - ÄÃ£ cÃ³ quyá»n, cÃ³ thá»ƒ báº¯t Ä‘áº§u
4. **ğŸ”´ Camera bá»‹ cháº·n** - Quyá»n bá»‹ tá»« chá»‘i, cáº§n cáº¥u hÃ¬nh láº¡i

## ğŸš€ Triá»ƒn khai thÃ nh cÃ´ng

Há»‡ thá»‘ng Ä‘Ã£ Ä‘Æ°á»£c cáº£i thiá»‡n vá»›i:
- âœ… Kiá»ƒm tra quyá»n trÆ°á»›c khi khá»Ÿi Ä‘á»™ng scanner
- âœ… UI/UX rÃµ rÃ ng cho tá»«ng tráº¡ng thÃ¡i
- âœ… HÆ°á»›ng dáº«n platform-specific
- âœ… Fallback nháº­p thá»§ cÃ´ng luÃ´n kháº£ dá»¥ng
- âœ… Xá»­ lÃ½ edge cases (PWA iOS, permission denied, etc.)

## ğŸ“ Test Checklist

- [ ] Test trÃªn iOS Safari
- [ ] Test PWA trÃªn iOS
- [ ] Test trÃªn Android Chrome
- [ ] Test PWA trÃªn Android
- [ ] Test trÃªn Desktop (Chrome, Firefox, Edge)
- [ ] Test tá»« chá»‘i quyá»n vÃ  cáº¥p láº¡i
- [ ] Test nháº­p mÃ£ thá»§ cÃ´ng
- [ ] Test offline mode
- [ ] Test vá»›i nhiá»u loáº¡i QR code khÃ¡c nhau
- [ ] Test trong Ä‘iá»u kiá»‡n Ã¡nh sÃ¡ng khÃ¡c nhau

---

*Cáº­p nháº­t: ThÃ¡ng 1/2025 - Version 2.0 vá»›i luá»“ng xin quyá»n Ä‘Æ°á»£c cáº£i thiá»‡n*
